<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Purchase Ticket</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="gallery/br.png" type="image/png">
</head>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const dateInput = document.getElementById('journeyDate');

    function formatDate(date) {
      const yyyy = date.getFullYear();
      const mm = String(date.getMonth() + 1).padStart(2, '0');
      const dd = String(date.getDate()).padStart(2, '0');
      return `${yyyy}-${mm}-${dd}`;
    }

    const today = new Date();
    const maxDate = new Date();
    maxDate.setDate(today.getDate() + 10);

    dateInput.min = formatDate(today);
    dateInput.max = formatDate(maxDate);
  });

document.addEventListener('DOMContentLoaded', () => {
  const fromInput = document.getElementById('fromStation');
  const toInput   = document.getElementById('toStation');
  const dateInput = document.getElementById('journeyDate');
  const statusEl  = document.getElementById('status');

  const today  = new Date();
  const maxDay = new Date();
  maxDay.setDate(today.getDate() + 10);
  dateInput.min = formatDate(today);
  dateInput.max = formatDate(maxDay);

  [fromInput, toInput, dateInput].forEach(el =>
    el.addEventListener('input', updateStatus)
  );
  updateStatus();

  function formatDate(d) {
    const yyyy = d.getFullYear();
    const mm   = String(d.getMonth() + 1).padStart(2, '0');
    const dd   = String(d.getDate()).padStart(2, '0');
    return `${yyyy}-${mm}-${dd}`;
  }

  function updateStatus() {
    const fs = fromInput.value.trim().toLowerCase();
    const ts = toInput.value.trim().toLowerCase();
    const dv = dateInput.value;
    if (!fs || !ts || !dv) {
      statusEl.textContent = '';
      statusEl.className = '';
      return;
    }

    const selDate = new Date(dv);
    const zeroNow = new Date();
    zeroNow.setHours(0,0,0,0);

    // Dayâ€‘ofâ€‘week
    const dow = selDate.getDay();
    let statusDay;
    if ([4,5,6].includes(dow))      statusDay = 'Low';
    else if (dow === 0)             statusDay = 'Medium';
    else                            statusDay = 'High';

    //Date offset only today 
    const diff = Math.floor((selDate - zeroNow) / (1000*60*60*24));
    let statusDate = null;
    if (diff === 0) statusDate = 'Low';

    //Station rules
    const lowFrom = [
      "cox's bazar","narsingdi","azampur",
      "brahmanbaria","ashuganj","bhairab_bazar",
      "mymensingh","jamalpur_town"
    ];
    const lowDest = [
      "cox's bazar","narsingdi","brahmanbaria",
      "ashuganj","bhairab_bazar","mymensingh",
      "akhaura","azampur"
    ];
    let statusLoc = null;
    if (lowFrom.includes(fs)) {
      statusLoc = 'Low';
    } else if (fs === 'dhaka' && lowDest.includes(ts)) {
      statusLoc = 'Low';
    }

    // Merge (Low > Medium > High)
    const parts = [statusDay, statusDate, statusLoc].filter(Boolean);
    let finalStatus;
    if (parts.includes('Low'))        finalStatus = 'Low';
    else if (parts.includes('Medium')) finalStatus = 'Medium';
    else                               finalStatus = 'High';

    // Render text
    statusEl.textContent = `${finalStatus} Chances of getting tickets.
`;

    //Toggle CSS classes based on status
    statusEl.className = '';
    statusEl.classList.add(
      finalStatus.toLowerCase() === 'low'    ? 'status-low' :
      finalStatus.toLowerCase() === 'medium' ? 'status-medium' :
                                              'status-high'
    );
  }
});

</script>
<body>
  <header>
    <div class="container">
      <h1>ðŸš† RailNet Bangladesh</h1>
      <p id="datetime"></p>
    </div>
  </header>

  <div class="hamburger" onclick="toggleSidebar()">â˜°</div>

  <div id="sidebar" class="sidebar">
    <ul class="sidebar-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="roster.html">Roster</a></li>
      <li><a href="train.html">Train Information</a></li>
      <li><a href="ticket.html">Purchase Ticket</a></li>
      <li>
          <button class="dropdown-btn" onclick="toggleDivisionList()">Railfans â–¼</button>
          <ul id="divisionList" class="dropdown hidden">
            <li><a href="dhaka.html"><button>Dhaka</button></a></li>
            <li><a href="sylhet.html"><button>Sylhet</button></a></li>
            <li><a href="khulna.html"><button>Khulna</button></a></li>
            <li><a href="rangpur.html"><button>Rangpur</button></a></li>
            <li><a href="rajshahi.html"><button>Rajshahi</button></a></li>
            <li><a href="barishal.html"><button>Barishal</button></a></li>
            <li><a href="mymensingh.html"><button>Mymensingh</button></a></li>
            <li><a href="chattogram.html"><button>Chattogram</button></a></li>
          </ul>
      </li>
      <li><a href="maintain.html">Coach & Seat Plan</a></li>
      <li><a href="catering.html">Catering Menu</a></li>
      <li>
      <button class="dropdown-btn" onclick="toggleLostFoundList()">Lost & Found â–¼</button>
      <ul id="lostFoundList" class="dropdown hidden">
        <li><a href="maintain.html">Lost</a></li>
        <li><a href="maintain.html">Found</a></li>
      </ul>
      </li>
      <li><a href="contact.html">Contact Us</a></li>
      <li><button id="installBtn" onclick="install()">ðŸ“² Install App</button></li>
    </ul>
  </div>
  <div id="purchase">
    <img src="gallery/purchase.png" alt="Puchase">
  </div>
  <div>
    <h4 id="status"></h4>
  </div>
  <div class="ticket">
  <label for="fromStation">From Station</label>
  <div class="autocomplete-container">
    <input type="text" id="fromStation" placeholder="From station" />
  </div>

  <label for="toStation">To Station</label>
  <div class="autocomplete-container">
    <input type="text" id="toStation" placeholder="To station" />
  </div>

  <label for="journeyDate">Enter Date</label>
  <input type="date" id="journeyDate" name="journeyDate" required />

  <button id="searchTrainBtn" onclick="searchTrain()">Search Train</button>
</div>

  <footer>
    <div class="container">
      <p>Helpline: <a href="tel:131"><strong>131</strong></a></p>
      <p>&copy; 2025 Train Time Tracker. All rights reserved.</p>
    </div>
  </footer>

    <script>
      const stations = [
      "Abdulpur", "Aditmari", "Ahsanganj", "Akhanagar", "Akhaura", "Akkelpur",
      "Alamdanga", "Amirabad", "Amnura", "Amnura_Bypass", "Arani", "Ashuganj",
      "Atharabari", "Azampur", "Azim Nagar", "Badarganj", "Badherhat", "Badiakhali",
      "Baharpur", "Bajitpur", "Bajra", "Bamondanga", "Banani", "Baramchal",
      "Barhatta", "Barkhata", "Baura", "Benapole", "Bhairab_Bazar", "Bhanga",
      "Bhanga_Junction", "Bhanugach", "Bhatiary", "Bheramara", "Bhomradah", "Bhotmari",
      "Bhuapur", "Bidyaganj", "Biman_Bandar", "Birampur", "Birol", "Boalmari_Bazar",
      "Bogura", "Bolakhal", "Bonar_Para", "Boral_Bridge", "Borashi", "Brahmanbaria",
      "Burimari", "Chakaria", "Chandpur", "Chandpur_Court", "Chandradighalia",
      "Chapainawabganj", "Chapta", "Chatmohar", "Chattogram", "Chilahati", "Chirirbandar",
      "Chitoshi_Road", "Choto Bahirbag", "Choumuhani", "Chuadanga", "Chulkati_Bazar",
      "Cox's Bazar", "Cumilla", "Darshana_Halt", "Dashuria", "Daulatpur", "Dewanganj_Bazar",
      "Dhaka", "Dhaka_Cantonment", "Dhalarchar", "Dinajpur", "Dohazari", "Domar", "Dublia",
      "Dulahazara", "Faridpur", "Feni", "Fulbari", "Gachihata", "Gafargaon", "Gaibandha", 
      "Gobra", "GOMDANDI", "Gopalganj", "Gouripur_Myn", "Gunabati", "Hajiganj", "Haldibari",
      "Harashpur", "HARBANG", "Hasanpur", "Hatibandha", "Hemnagar", "Hi-Tech City", "Hili",
      "Ibrahimabad", "Ishwardi", "Ishwardi Bypass", "ISLAMABAD", "Islampur_Bazar",
      "Jaforshahi", "Jagannathgonj_Bazar", "Jamalpur_Town", "Jamtail", "Janali_Hat", "Jashore",
      "Jhikargacha", "Joydebpur", "Joypurhat", "Kakonhat", "Kalukhali", "Kanchan_Junction",
      "Kankina", "Kaoraid", "Kashiani", "Kashinathpur", "Katakhali", "Kaunia", "Kawgaon",
      "Kendua_Bazar", "Khoksha", "Kholahati", "Khulna", "Kishorganj", "Kismat", "Kolkata",
      "Kotchandpur", "Kulaura", "Kuliarchar", "Kumarkhali", "Kumira", "Kurigram", 
      "Kushtia_Court", "Laksam", "Lalmonirhat", "LOHAGARA", "Lohagora", "Lokmanpur",
      "Lolitnagar", "Madhnagar", "Madhukhali", "Mahendranagar", "Mahimaganj", 
      "Maijdi Court", "Maijgaon", "Majhgram", "Manikkhali", "Manmathapur", "Mawa", "Meher",
      "Melandah_Bazar", "Methikanda", "Mirbagh", "Mirpur", "Mirzapur", "Modhu_Road",
      "Mohammad Nagar", "Mohanganj", "Mongalpur", "Mongla", "Montola", "Mubarakganj",
      "Mukundapur", "Muladhuli", "Mymensingh", "Nachole", "Naliagram", "Nandina", "Nangolkot",
      "Narail", "Narayanganj", "Narsingdi", "Narundi", "Natherpetua", "Natore", "Nayaniburuj",
      "Nayapara", "Netrakona", "New Jalpaiguri", "Nilphamari", "Noakhali", "Noapara", "Pabna",
      "Pachuria", "Padma", "Padmabila", "Pahartali", "Paksey", "Panchagarh", "Panchbibi",
      "Pangsha", "Parbatipur", "Patgram", "Patiya", "Phultala", "Pirgacha", "Pirganj",
      "Piyarpur", "Poradaha", "Pukuria", "Quasba", "Raghabpur", "Rajbari", "Rajshahi",
      "Rajshahi_Court", "Ramu", "Rangpur", "Rohanpur", "Ruhia", "SH M Monsur Ali", "Safdarpur",
      "Saidpur", "Santahar", "Sararchar", "Sardah_Road", "Sarishabari", "Sathia_Rajapur",
      "Satkania", "Setabganj", "Shahaji_Bazar", "Shahrasti", "Shahtali", "Shaistaganj",
      "Shamshernagar", "Shashidal", "Shibchar", "Shibganj", "Sholoshohor", "Shyamgonj",
      "Shyampur", "Singia", "Sirajganj_Bazar", "Sirajganjraipur", "Sitlai", "Sonaimuri",
      "Sonatola", "SOYDABAD", "Sreemangal", "Sreepur", "Sultanpur", "Sylhet", "Talma",
      "Talora", "Tangail", "Tantibandha", "Tarakandi", "Tebunia", "Teesta_Junction",
      "Thakrokona", "Thakurgaon_Road", "Tongi", "Tushbhandar", "Ullapara"
    ];

    function setupAutocomplete(input) {
      input.addEventListener('input', () => {
        const listId = input.id + '-list';
        let oldList = document.getElementById(listId);
        if (oldList) oldList.remove();

        const list = document.createElement('ul');
        list.id = listId;
        list.className = 'autocomplete-list';

        const value = input.value.toLowerCase();
        if (!value) return;

        const matches = stations.filter(station =>
          station.toLowerCase().includes(value)
        ).slice(0, 8); // limit to 8 results

        matches.forEach(match => {
          const item = document.createElement('li');
          item.textContent = match;
          item.onclick = () => {
            input.value = match;
            list.remove();
            input.dispatchEvent(new Event('input'));
          };
          list.appendChild(item);
        });

        if (matches.length) input.parentNode.appendChild(list);
      });

      document.addEventListener('click', (e) => {
        if (!input.contains(e.target)) {
          const list = document.getElementById(input.id + '-list');
          if (list) list.remove();
        }
      });
    }

    setupAutocomplete(document.getElementById('fromStation'));
    setupAutocomplete(document.getElementById('toStation'));
 </script>

 <script src="script.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>
